generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  shadowDatabaseUrl = env("HEROKU_POSTGRESQL_IVORY_URL")
}

model User {
  id          Int    @id @default(autoincrement())
  email       String @unique
  firstName   String
  lastName    String
  userName    String @unique
  password    String
  phoneNumber String @unique
  status      AccountStatus @default(INCOMPLETE)
  elo         Elo?
  games       Game[] @relation("UserGame")
  games2      Game[] @relation("UserGame2")
  allGames    Game[] @relation("AllUserGames")
  @@unique(fields: [id, phoneNumber], name: "idphoneNumber")
}

model Game {
  id        Int                @id @default(autoincrement())
  status    VerificationStatus @default(PENDING)
  users     User[]             @relation("UserGame")
  users2    User[]             @relation("UserGame2")
  score1    Int?
  score2    Int?
  GameType  GameType?
  userId    Int?
  User      User[]             @relation("AllUserGames", fields: [userId], references: [id])
  createdAt DateTime?
  endedAt   DateTime?

  @@unique(fields: [GameType, id], name: "idGameType")
}

model Elo {
  id         Int          @id @default(autoincrement())
  Handball   Int?         @default(1200)
  Basketball Int?         @default(1200)
  Tennis     Int?         @default(1200)
  Pingpong   Int?         @default(1200)
  Americanfootball Int? @default(1200)
  Football Int? @default(1200)
  Baseball Int? @default(1200)
  Volleyball Int? @default(1200)
  Boxing Int? @default(1200)
  Cricket Int? @default(1200)
  Rugby Int? @default(1200)
  Wrestling Int? @default(1200)
  Hockey Int? @default(1200)
  Badminton Int? @default(1200)
  Dodgeball Int? @default(1200)
  Racquetball Int? @default(1200)
  Fencing Int? @default(1200)
  Frisby Int? @default(1200)
  Lacrosse Int? @default(1200)
  Squash Int? @default(1200)
  user       User         @relation(fields: [username], references: [userName])
  username   String       @unique
  eloHistory EloHistory[]
}

model EloHistory {
  id         Int       @id @default(autoincrement())
  History    Elo       @relation(fields: [eloId], references: [id])
  eloId      Int
  eloHistory Int
  GameType   GameType?
}

enum GameType {
  HANDBALL
  BASKETBALL
  TENNIS
  PINGPONG
  AMERICANFOOTBALL
  FOOTBALL
  BASEBALL
  VOLLEYBALL
  BOXING
  CRICKET
  RUGBY
  WRESTLING
  HOCKEY
  BADMINTON
  DODGEBALL
  RACQUETBALL
  FENCING
  FRISBY
  LACROSSE
  SQUASH
}

enum VerificationStatus {
  PENDING
  STARTED
  COMPLETED
}

enum AccountStatus {
  INCOMPLETE
  CONFIRMED
  BANNED
}